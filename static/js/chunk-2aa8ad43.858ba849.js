(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2aa8ad43","chunk-1e5d7123"],{2440:function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"f",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return l})),n.d(t,"h",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return s}));var o=n("b775");function c(e){return Object(o["a"])({url:"/backstage/config/list",method:"get",params:e})}function r(e){return Object(o["a"])({url:"/backstage/config/info/".concat(e),method:"get"})}function a(e){return Object(o["a"])({url:"/backstage/config/create",method:"post",data:e})}function i(e){return Object(o["a"])({url:"/backstage/config/update",method:"post",data:e})}function l(e){return Object(o["a"])({url:"/backstage/config/delete",method:"post",data:e})}function u(e){return Object(o["a"])({url:"/backstage/config/status",method:"post",data:e})}function d(e){return Object(o["a"])({url:"/backstage/config/get/".concat(e),method:"get"})}function s(e){return Object(o["a"])({url:"/backstage/config/update/value",method:"post",data:e})}},3033:function(e,t,n){var o=n("24fb");t=o(!1),t.push([e.i,".page[data-v-3e09e3e0]{text-align:center}",""]),e.exports=t},"3d15":function(e,t,n){"use strict";n.r(t);var o=n("ade3"),c=n("7a23"),r=Object(c["withScopeId"])("data-v-5ba91c28");Object(c["pushScopeId"])("data-v-5ba91c28");var a={class:"g-container"};Object(c["popScopeId"])();var i=r((function(e,t,n,i,l,u){var d=Object(c["resolveComponent"])("gl-button"),s=Object(c["resolveComponent"])("el-form-item"),f=Object(c["resolveComponent"])("el-input"),b=Object(c["resolveComponent"])("el-date-picker"),p=Object(c["resolveComponent"])("el-upload"),O=Object(c["resolveComponent"])("el-form"),j=Object(c["resolveComponent"])("el-table-column"),g=Object(c["resolveComponent"])("el-avatar"),m=Object(c["resolveComponent"])("el-table"),h=Object(c["resolveComponent"])("page"),v=Object(c["resolveComponent"])("oss-set"),V=Object(c["resolveDirective"])("permission"),C=Object(c["resolveDirective"])("repeat"),w=Object(c["resolveDirective"])("loading");return Object(c["openBlock"])(),Object(c["createBlock"])("div",a,[Object(c["createVNode"])(O,{ref:"refForm",inline:!0,onKeyup:t[8]||(t[8]=Object(c["withKeys"])((function(t){return e.getList()}),["enter"]))},{default:r((function(){return[Object(c["createVNode"])(s,null,{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(d,{sort:"config",type:"primary",onClick:t[1]||(t[1]=function(t){return e.configHandle()})},null,512),[[V,"backstage:config:update:value"]])]})),_:1}),Object(c["createVNode"])(s,null,{default:r((function(){return[Object(c["createVNode"])(f,{modelValue:e.form.extension,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.extension=t}),placeholder:"扩展名称",clearable:""},null,8,["modelValue"])]})),_:1}),Object(c["createVNode"])(s,null,{default:r((function(){return[Object(c["createVNode"])(b,{modelValue:e.form.date,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.date=t}),type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",clearable:""},null,8,["modelValue"])]})),_:1}),Object(c["createVNode"])(s,null,{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(d,{sort:"query",onClick:t[4]||(t[4]=function(t){return e.getList()})},null,512),[[C]]),Object(c["withDirectives"])(Object(c["createVNode"])(d,{sort:"reset",onClick:t[5]||(t[5]=function(t){return e.clearJson(e.form),e.getList()})},null,512),[[C]])]})),_:1}),Object(c["createVNode"])(s,null,{default:r((function(){return[Object(c["createVNode"])(p,{class:"upload-demo",action:e.uploadApi(),"on-success":e.successHandle,headers:Object(o["a"])({},e.TOKEN_KEY,e.token),"show-file-list":!1},{default:r((function(){return[Object(c["createVNode"])(d,{sort:"upload",type:"primary"})]})),_:1},8,["action","on-success","headers"])]})),_:1}),Object(c["createVNode"])(s,null,{default:r((function(){return[Object(c["withDirectives"])(Object(c["createVNode"])(d,{sort:"batchDelete",type:"danger",onClick:t[6]||(t[6]=function(t){return e.delHandle()}),disabled:e.selection.length<=0},null,8,["disabled"]),[[V,"oss:file:delete"]]),Object(c["withDirectives"])(Object(c["createVNode"])(d,{sort:"clear",type:"danger",onClick:t[7]||(t[7]=function(t){return e.clearHandle()})},null,512),[[V,"oss:file:clear"]])]})),_:1})]})),_:1},512),Object(c["withDirectives"])(Object(c["createVNode"])(m,{border:"",class:"g-table","element-loading-spinner":"el-icon-loading",data:e.list,onSelectionChange:e.selectionHandle},{default:r((function(){return[Object(c["createVNode"])(j,{align:"center",type:"selection",width:"50"}),Object(c["createVNode"])(j,{align:"center",label:"ID",prop:"id",width:"80"}),Object(c["createVNode"])(j,{align:"center",label:"文件",width:"80"},{default:r((function(t){var n=t.row;return[Object(c["createVNode"])(g,{src:e.flowApi(n.id),shape:"square",fit:"contain"},{default:r((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(n.extension),1)]})),_:2},1032,["src"])]})),_:1}),Object(c["createVNode"])(j,{align:"center",label:"原始名称",prop:"original","min-width":"150","show-overflow-tooltip":!0}),Object(c["createVNode"])(j,{align:"center",label:"实际名称",prop:"actual","min-width":"150","show-overflow-tooltip":!0}),Object(c["createVNode"])(j,{align:"center",label:"扩展名称",prop:"extension","min-width":"100"}),Object(c["createVNode"])(j,{align:"center",label:"大小",prop:"size"}),Object(c["createVNode"])(j,{align:"center",label:"物理路径",prop:"path","min-width":"150","show-overflow-tooltip":!0}),Object(c["createVNode"])(j,{align:"center",label:"虚拟路径",prop:"url","min-width":"150","show-overflow-tooltip":!0}),Object(c["createVNode"])(j,{align:"center",label:"上传时间",prop:"created_at",width:"160"}),Object(c["createVNode"])(j,{align:"center",label:"操作",width:"130",fixed:"right"},{default:r((function(t){var n=t.row;return[Object(c["withDirectives"])(Object(c["createVNode"])(d,{sort:"download",type:"text",size:"small",onClick:function(t){return e.downloadHandle(n.id)}},null,8,["onClick"]),[[V,"oss:file:download"]]),Object(c["withDirectives"])(Object(c["createVNode"])(d,{sort:"delete",type:"text",size:"small",onClick:function(t){return e.delHandle(n.id)}},null,8,["onClick"]),[[V,"oss:file:delete"]])]})),_:1})]})),_:1},8,["data","onSelectionChange"]),[[w,e.loading]]),Object(c["createVNode"])(h,{page:e.page,onChange:e.pageChangeHandle},null,8,["page","onChange"]),e.visible?(Object(c["openBlock"])(),Object(c["createBlock"])(v,{key:0,ref:"refOssSet"},null,512)):Object(c["createCommentVNode"])("",!0)])})),l=n("5530"),u=(n("caad"),n("2532"),n("d81d"),n("99af"),n("a15b"),n("5502")),d=n("c6e7"),s=n("acfb"),f=n("3e51"),b=n("c0ff"),p=n("ed08"),O=n("b775"),j=n("4360"),g=n("c9d9"),m=j["a"].getters["user/tokenVal"];function h(e){return Object(O["a"])({url:"/oss/file/page",method:"get",params:e})}function v(e){var t="",n="/oss/file/flow/".concat(e);return t="".concat("https://gumingchen.cn/apis/slipper"+n),t}function V(e){var t="",n="/oss/file/upload";return t="".concat("https://gumingchen.cn/apis/slipper"+n),t+=e?"?".concat(Object(p["f"])(e)):"",t}function C(e){return Object(O["a"])({url:"/oss/file/delete",method:"post",data:e})}function w(){return Object(O["a"])({url:"/oss/file/clear",method:"post"})}function k(e){var t="",n="/oss/file/download/".concat(e);t="".concat("https://gumingchen.cn/apis/slipper"+n);var c=Object(o["a"])({},g["j"],m);return t+="?".concat(Object(p["f"])(c)),t}var N=Object(c["defineComponent"])({components:{Page:f["a"],OssSet:b["default"]},setup:function(){var e=Object(u["b"])(),t=e.state.user.token.token,n=Object(s["a"])(),o=n.$message,r=n.$confirm,a=Object(c["ref"])(),i=Object(c["ref"])(),f=Object(d["a"])(),b=f.page,O=Object(c["reactive"])({loading:!1,visible:!1,form:{extension:"",date:[]},list:[],selection:[]}),j=function(){var e={extension:O.form.extension,start:O.form.date.length?Object(p["e"])(O.form.date[0]):"",end:O.form.date.length?Object(p["e"])(O.form.date[1]):"",current:b.current,size:b.size};O.loading=!0,h(e).then((function(e){e&&(O.list=e.data.list,b.total=e.data.total),Object(c["nextTick"])((function(){O.loading=!1}))}))},m=function(){O.visible=!0,Object(c["nextTick"])((function(){i.value.init()}))},N=function(e){g["g"].includes(e.code)?(o({message:"操作成功!",type:"success"}),j()):o({message:"操作失败",type:"warning"})},x=function(e){var t;t=e?[e]:O.selection.map((function(e){return e.id})),r("确定对[id=".concat(t.join(","),"]进行[").concat(e?"删除":"批量删除","]操作?"),"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){C(t).then((function(e){e&&(o({message:"操作成功!",type:"success"}),j())}))})).catch((function(){}))},_=function(){r("确定进行[清除]操作?","提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((function(){w().then((function(e){e&&o({message:"操作成功!",type:"success"})}))})).catch((function(){}))},y=function(e){window.open(k(e))},S=function(e){O.selection=e},z=function(e){b.current=e.current,b.size=e.size,j()};return Object(c["onBeforeMount"])((function(){j()})),Object(l["a"])(Object(l["a"])({refForm:a,refOssSet:i,page:b},Object(c["toRefs"])(O)),{},{getList:j,configHandle:m,successHandle:N,delHandle:x,clearHandle:_,uploadApi:V,flowApi:v,downloadHandle:y,selectionHandle:S,pageChangeHandle:z,clearJson:p["a"],token:t,TOKEN_KEY:g["j"]})}});N.render=i,N.__scopeId="data-v-5ba91c28";t["default"]=N},"3e51":function(e,t,n){"use strict";var o=n("7a23"),c=Object(o["withScopeId"])("data-v-3e09e3e0"),r=c((function(e,t,n,c,r,a){var i=Object(o["resolveComponent"])("el-pagination");return Object(o["openBlock"])(),Object(o["createBlock"])(i,{class:"page padding_t-20",background:"",layout:"total, sizes, prev, pager, next, jumper, ->","current-page":e.page.current,"page-sizes":e.page.sizes,"page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentChangeHandle,onSizeChange:e.sizeChangeHandle},null,8,["current-page","page-sizes","page-size","total","onCurrentChange","onSizeChange"])})),a=Object(o["defineComponent"])({emits:["change"],props:{page:{type:Object,required:!0}},setup:function(e,t){var n=t.emit,o=function(t){n("change",{current:t,size:e.page.size})},c=function(t){n("change",{current:e.page.current,size:t})};return{currentChangeHandle:o,sizeChangeHandle:c}}});n("4ecf");a.render=r,a.__scopeId="data-v-3e09e3e0";t["a"]=a},"4ecf":function(e,t,n){"use strict";n("9a54")},"9a54":function(e,t,n){var o=n("3033");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var c=n("499e").default;c("3f9894cd",o,!0,{sourceMap:!1,shadowMode:!1})},acfb:function(e,t,n){"use strict";var o=n("7a23");t["a"]=function(){var e=Object(o["getCurrentInstance"])(),t=e.appContext,n=t.config.globalProperties,c=n.$message,r=n.$confirm,a=n.$loading;return{$message:c,$confirm:r,$loading:a}}},c0ff:function(e,t,n){"use strict";n.r(t);n("b0c0");var o=n("7a23"),c={class:"dialog-footer"};function r(e,t,n,r,a,i){var l=Object(o["resolveComponent"])("el-radio"),u=Object(o["resolveComponent"])("el-radio-group"),d=Object(o["resolveComponent"])("el-form-item"),s=Object(o["resolveComponent"])("el-input"),f=Object(o["resolveComponent"])("el-form"),b=Object(o["resolveComponent"])("gl-button"),p=Object(o["resolveComponent"])("el-dialog"),O=Object(o["resolveDirective"])("loading"),j=Object(o["resolveDirective"])("repeat");return Object(o["openBlock"])(),Object(o["createBlock"])(p,{width:"600px",title:"OSS配置",modelValue:e.visible,"onUpdate:modelValue":t[7]||(t[7]=function(t){return e.visible=t}),"close-on-click-modal":!1,onClosed:e.dialogClosedHandle},{footer:Object(o["withCtx"])((function(){return[Object(o["createVNode"])("span",c,[Object(o["createVNode"])(b,{sort:"cancel",onClick:t[5]||(t[5]=function(t){return e.visible=!1})}),Object(o["withDirectives"])(Object(o["createVNode"])(b,{sort:"confirm",type:"primary",onClick:t[6]||(t[6]=function(t){return e.submit()})},null,512),[[j]])])]})),default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])(Object(o["createVNode"])(f,{model:e.form,rules:e.rules,ref:"refForm","label-position":"top"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{label:"类型",prop:"id"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(u,{modelValue:e.form.id,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.form.id=t})},{default:Object(o["withCtx"])((function(){return[(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(e.OSSs,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])(l,{key:e.id,label:e.id},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.name),1)]})),_:2},1032,["label"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(o["createVNode"])(d,{label:"域名",prop:"domain"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.domain,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.form.domain=t}),placeholder:"域名"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(d,{label:"前缀",prop:"prefix"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.prefix,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.form.prefix=t}),placeholder:"前缀"},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(d,{label:"存储目录",prop:"path"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(s,{modelValue:e.form.path,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.form.path=t}),placeholder:"存储目录"},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model","rules"]),[[O,e.loading]])]})),_:1},8,["modelValue","onClosed"])}var a=n("5530"),i=(n("4de4"),n("acfb")),l=n("2440"),u=n("a63d"),d=Object(o["defineComponent"])({emits:["refresh"],setup:function(e,t){var n=t.emit,c=Object(i["a"])(),r=c.$message,d=Object(o["ref"])(),s=Object(o["reactive"])({visible:!1,loading:!1,key:"CLOUD_STORAGE",OSSs:[],form:{id:"",domain:"",prefix:"",path:""}}),f=Object(o["reactive"])(function(){var e=function(e,t,n){""!==t&&Object(u["d"])(t)?n():n(new Error("请输入正确的域名"))};return{id:[{required:!0,message:"请选择类型",trigger:"change"}],domain:[{required:!0,validator:e,trigger:"blur"}],path:[{required:!0,message:"请输入存储目录",trigger:"blur"}]}}()),b=function(e){var t=s.OSSs.filter((function(t){return t.id===e}))[0],n=JSON.parse(t.json_value);s.form.id=t.id,s.form.domain=n.domain,s.form.prefix=n.prefix,s.form.path=n.path},p=function(){s.visible=!0,s.loading=!0,Object(l["e"])(s.key).then((function(e){if(e){s.OSSs=e.data;var t=e.data.filter((function(e){return 1===e.status}))[0];b(t.id)}Object(o["nextTick"])((function(){s.loading=!1}))}))},O=function(){d.value.validate((function(e){if(e){var t=JSON.stringify({domain:s.form.domain,prefix:s.form.prefix,path:s.form.path}),o={id:s.form.id,json_value:t};Object(l["d"])(o).then((function(e){e&&(s.visible=!1,r({message:"操作成功!",type:"success"}),n("refresh"))}))}}))},j=function(){d.value.resetFields()};return Object(a["a"])(Object(a["a"])({refForm:d},Object(o["toRefs"])(s)),{},{rules:f,init:p,submit:O,dialogClosedHandle:j})}});d.render=r;t["default"]=d},c6e7:function(e,t,n){"use strict";var o=n("7a23");t["a"]=function(){var e=Object(o["reactive"])({current:1,size:10,total:0,sizes:[10,20,50,100,200]});return{page:e}}}}]);