"use strict";(self["webpackChunkvue3_element_plus_admin"]=self["webpackChunkvue3_element_plus_admin"]||[]).push([[9517],{34010:function(e,t,n){n.d(t,{Iw:function(){return a},K4:function(){return l},ef:function(){return s},oU:function(){return i},ou:function(){return u},wS:function(){return o}});var r=n(20077);function a(){return(0,r.Z)({url:"/backstage/menu/select/list",method:"get"})}function l(e){return(0,r.Z)({url:`/backstage/menu/info/${e}`,method:"get"})}function u(e){return(0,r.Z)({url:"/backstage/menu/create",method:"post",data:e})}function o(e){return(0,r.Z)({url:"/backstage/menu/update",method:"post",data:e})}function s(e){return(0,r.Z)({url:"/backstage/menu/delete",method:"post",data:e})}function i(e){return(0,r.Z)({url:"/backstage/menu/drag",method:"post",data:e})}},87978:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var r=n(14646),a=(n(21123),n(13289)),l=(n(14635),n(59571)),u=(n(97085),n(58125),n(33612)),o=(n(82262),n(440)),s=n(54592);const i={class:"dialog-footer"},d=(0,o.Uk)("取消"),c=(0,o.Uk)("确认");function m(e,t,n,m,f,p){const h=u.m,v=l.nH,g=l.ly,_=a.mi,b=r.d0,w=(0,o.Q2)("repeat");return(0,o.wg)(),(0,o.j4)(b,{width:"450px",title:"修改",modelValue:e.visible,"onUpdate:modelValue":t[4]||(t[4]=t=>e.visible=t),"close-on-click-modal":!1,onClosed:e.dialogClosedHandle,"append-to-body":"",draggable:""},{footer:(0,o.w5)((()=>[(0,o._)("span",i,[(0,o.Wm)(_,{onClick:t[2]||(t[2]=t=>e.visible=!1)},{default:(0,o.w5)((()=>[d])),_:1}),(0,o.wy)(((0,o.wg)(),(0,o.j4)(_,{type:"primary",onClick:t[3]||(t[3]=t=>e.submit())},{default:(0,o.w5)((()=>[c])),_:1})),[[w]])])])),default:(0,o.w5)((()=>[(0,o.Wm)(g,{model:e.form,rules:e.rules,ref:"refForm",onKeyup:t[1]||(t[1]=(0,s.D2)((t=>e.submit()),["enter"])),"label-position":"top"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{label:"菜单权限",prop:"menu_ids"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{class:"width-full",ref:"refCascader",modelValue:e.form.menu_ids,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.menu_ids=t),options:e.menus,props:e.cascaderProps,"show-all-levels":!1,"collapse-tags":"","collapse-tags-tooltip":"",clearable:""},null,8,["modelValue","options","props"])])),_:1})])),_:1},8,["model","rules"])])),_:1},8,["modelValue","onClosed"])}var f=n(84367),p=n(68257),h=n(34010),v=n(58712),g=(0,o.aZ)({emits:["refresh"],setup(e,{emit:t}){const n=(0,f.iH)(),r=(0,f.iH)(),a=(0,f.qj)({visible:!1,menus:[],form:{enterprise_id:null,menu_ids:[]}}),l=(0,f.qj)(function(){return{menu_ids:[{type:"array",required:!0,message:"请选择菜单权限",trigger:"blur"}]}}()),u=(0,o.Fl)((()=>{const e={multiple:!0,emitPath:!1,checkStrictly:!1,value:"id",label:"name_cn",children:"children"};return e})),s=async()=>{const e=await(0,h.Iw)();if(e){const t=[{id:0,name_cn:"一级菜单",name_en:"First level menu",parent_id:0,children:e.data}];a.menus=t}},i=async()=>{const e=await(0,v.ds)(a.form.enterprise_id);e&&(a.form.menu_ids=e.data)},d=async e=>{a.visible=!0,a.form.enterprise_id=e,await s(),await i()},c=()=>{n.value.validate((e=>{if(e){const e=r.value.getCheckedNodes(!0),n=[];e.forEach((e=>{n.push.apply(n,e.pathValues)})),a.form.menu_ids=Array.from(new Set(n)).filter((e=>0!==e)),(0,v.ci)(a.form).then((e=>{e&&(a.visible=!1,(0,p.z8)({message:"操作成功!",type:"success"}),t("refresh"))}))}}))},m=()=>{n.value.resetFields()};return{refForm:n,refCascader:r,...(0,f.BK)(a),rules:l,cascaderProps:u,init:d,submit:c,dialogClosedHandle:m}}}),_=n(40465);const b=(0,_.Z)(g,[["render",m]]);var w=b},15691:function(e,t,n){n.d(t,{Z:function(){return p}});var r=n(33392),a=n(7163),l=n(85963),u=n(54421),o=a.Z?a.Z.isConcatSpreadable:void 0;function s(e){return(0,u.Z)(e)||(0,l.Z)(e)||!!(o&&e&&e[o])}var i=s;function d(e,t,n,a,l){var u=-1,o=e.length;n||(n=i),l||(l=[]);while(++u<o){var s=e[u];t>0&&n(s)?t>1?d(s,t-1,n,a,l):(0,r.Z)(l,s):a||(l[l.length]=s)}return l}var c=d,m=1/0;function f(e){var t=null==e?0:e.length;return t?c(e,m):[]}var p=f}}]);