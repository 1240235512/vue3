(self["webpackChunkvue3_element_plus_admin"]=self["webpackChunkvue3_element_plus_admin"]||[]).push([[8232],{56201:function(e,t,n){"use strict";n.r(t);var a=n(8081),d=n.n(a),i=n(23645),o=n.n(i),r=o()(d());r.push([e.id,"[data-v-3b57c81d] .el-tree-node__content{height:36px}[data-v-3b57c81d] .el-tree-node__content:hover .node-button-box .el-button{visibility:visible}.node-box[data-v-3b57c81d]{width:0;font-size:14px}.node-box .node-button-box .el-button[data-v-3b57c81d]{visibility:hidden}.node-box .node-button-box .el-button+.el-button[data-v-3b57c81d],.node-box .node-button-box .el-tag[data-v-3b57c81d]{margin-left:5px}",""]),t["default"]=r},34010:function(e,t,n){"use strict";n.d(t,{Iw:function(){return d},K4:function(){return i},ef:function(){return l},oU:function(){return c},ou:function(){return o},wS:function(){return r}});var a=n(20077);function d(){return(0,a.Z)({url:"/backstage/menu/select/list",method:"get"})}function i(e){return(0,a.Z)({url:`/backstage/menu/info/${e}`,method:"get"})}function o(e){return(0,a.Z)({url:"/backstage/menu/create",method:"post",data:e})}function r(e){return(0,a.Z)({url:"/backstage/menu/update",method:"post",data:e})}function l(e){return(0,a.Z)({url:"/backstage/menu/delete",method:"post",data:e})}function c(e){return(0,a.Z)({url:"/backstage/menu/drag",method:"post",data:e})}},89528:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(84367),d=n(66530);function i(){const e=(0,d.oR)(),t=(0,a.qj)({dictionaryMap:{},dictionaryList:[]}),n=async n=>{const a=await e.dispatch("dictionary/getDictionary",n);t.dictionaryList=a;const d={};a.forEach((e=>{d[e.value]=e.label})),t.dictionaryMap=d};return{...(0,a.BK)(t),getDictionary:n}}},25430:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(440),d=n(53945);function i(e,t){const n=(0,a.FN)().proxy;return(0,a.Fl)({get(){return e[t||d.Pl]},set(e){const a=t?`update:${t}`:d.f_;n.$emit(a,e)}})}},67463:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});const a="virtual-"},61281:function(e,t,n){var a=n(56201);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var d=n(89743).Z;d("e630d9aa",a,!0,{sourceMap:!1,shadowMode:!1})},8232:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return U}});var a=n(42321),d=(n(1926),n(98399)),i=(n(39509),n(52229)),o=(n(29620),n(12516)),r=(n(86724),n(13289)),l=(n(14635),n(96648)),c=n(66847),s=(n(28630),n(440)),u=n(38643),p=n(54592);const f={class:"sidebar-container height-full width-300 flex-box flex_d-column"},m={class:"margin_b-10 flex-box"},y={class:"node-box font-size-14 flex-item_f-1 flex-box flex_j_c-space-between flex_a_i-center"},b={class:"node-label flex-item_f-1 margin_r-10 ellipse"},w={class:"node-button-box"};function g(e,t,n,g,_,h){const k=l["default"],x=c.EZ,v=l["default"],H=r.mi,M=o.Ks,z=i.y,Z=d.Mr,j=(0,s.Q2)("repeat"),D=(0,s.Q2)("permission"),C=a.t;return(0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("div",m,[(0,s.Wm)(x,{class:"margin_r-10",modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.name=t),onInput:e.inputHandle},{suffix:(0,s.w5)((()=>[(0,s.Wm)(k,{name:"search"})])),_:1},8,["modelValue","onInput"]),(0,s.wy)(((0,s.wg)(),(0,s.j4)(H,{onClick:t[1]||(t[1]=t=>e.getList())},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{name:"refresh"})])),_:1})),[[j]]),(0,s.wy)(((0,s.wg)(),(0,s.j4)(H,{type:"primary",onClick:t[2]||(t[2]=t=>e.addHandle())},{default:(0,s.w5)((()=>[(0,s.Wm)(v,{name:"plus"})])),_:1})),[[D,"menu:create"]])]),(0,s.wy)(((0,s.wg)(),(0,s.j4)(Z,{class:"flex-item_f-1"},{default:(0,s.w5)((()=>[(0,s.Wm)(z,{ref:"refTree",data:e.list,props:e.treeProps,"node-key":"id","expand-on-click-node":!0,"filter-node-method":e.filterNodeHandle,onNodeClick:e.clickHandle,"highlight-current":"",draggable:e.havePermission("menu:drag"),"allow-drag":e.allowDragHandle,"allow-drop":e.allowDropHandle,onNodeDrop:e.nodeDropHandle},{default:(0,s.w5)((({node:t,data:n})=>[(0,s._)("div",y,[(0,s._)("div",b,(0,u.zw)(n.name_cn),1),(0,s._)("div",w,[2!==n.type&&3!==n.type&&4!==n.type?(0,s.wy)(((0,s.wg)(),(0,s.j4)(H,{key:0,size:"small",onClick:(0,p.iM)((t=>e.addHandle(n)),["stop"])},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{name:"plus",size:"12px"})])),_:2},1032,["onClick"])),[[D,"menu:create"]]):(0,s.kq)("",!0),n.children?(0,s.kq)("",!0):(0,s.wy)(((0,s.wg)(),(0,s.j4)(H,{key:1,size:"small",onClick:(0,p.iM)((a=>e.deleteHandle(t,n)),["stop"])},{default:(0,s.w5)((()=>[(0,s.Wm)(k,{name:"delete",size:"12px"})])),_:2},1032,["onClick"])),[[D,"menu:delete"]]),0===n.type?((0,s.wg)(),(0,s.j4)(M,{key:2},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(e.dictionaryMap[n.type]),1)])),_:2},1024)):1===n.type?((0,s.wg)(),(0,s.j4)(M,{key:3,type:"success"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(e.dictionaryMap[n.type]),1)])),_:2},1024)):2===n.type?((0,s.wg)(),(0,s.j4)(M,{key:4,type:"info"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(e.dictionaryMap[n.type]),1)])),_:2},1024)):3===n.type?((0,s.wg)(),(0,s.j4)(M,{key:5,type:"warning"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(e.dictionaryMap[n.type]),1)])),_:2},1024)):4===n.type?((0,s.wg)(),(0,s.j4)(M,{key:6,type:"danger"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,u.zw)(e.dictionaryMap[n.type]),1)])),_:2},1024)):(0,s.kq)("",!0)])])])),_:1},8,["data","props","filter-node-method","onNodeClick","draggable","allow-drag","allow-drop","onNodeDrop"])])),_:1})),[[C,e.loading]])])}n(26699);var _=n(84367),h=n(81651),k=n(68257),x=n(25430),v=n(89528),H=n(53945),M=n(45764),z=n(67463),Z=n(34010),j=(0,s.aZ)({emits:["change",H.f_],props:{modelValue:{type:[String,Number],required:!0}},setup(e,{emit:t}){const n=(0,x.Z)(e),a=(0,_.iH)(),{dictionaryMap:d,getDictionary:i}=(0,v.Z)(),o=(0,_.qj)({loading:!1,form:{name:""},list:[],index:1}),r=(0,s.Fl)((()=>{const e={children:"children",label:"name_cn"};return e})),l=()=>{o.loading=!0,(0,Z.Iw)().then((e=>{e&&(o.list=e.data),(0,s.Y3)((()=>{o.loading=!1,a.value.filter(o.form.name)}))}))},c=e=>{const t={id:`${z.c}${o.index}`,name_cn:`未命名${o.index}`,name_en:`Unnamed ${o.index}`,parent_id:0,type:0};e?(t.parent_id=e.id,1===e.type&&(t.type=2),e.children||(e.children=[]),e.children.push(t)):o.list.push(t),o.index++},u=(e,t,n)=>{h.T.confirm(`确定对[id=${e}]进行[删除]操作?`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,Z.ef)({key:e}).then((e=>{e&&((0,k.z8)({message:"操作成功!",type:"success"}),t.splice(n,1))}))})).catch((()=>{}))},p=(e,t)=>{const n=e.parent,a=n.data.children||n.data,d=a.findIndex((e=>e.id===t.id));(t.id+"").includes(z.c)?a.splice(d,1):u(t.id,a,d)},f=(e,a)=>{n.value=e.id,t("change",{row:e,parentType:a.parent.data.type||0})},m=e=>!(e.data.id+"").includes(z.c),y=(e,t,n)=>{let a=!0;const d=e.data,i=t.data;let o;switch(n){case"inner":o=i.type;break;case"prev":case"next":o=t.parent.data.type||0;break}switch(d.type){case 0:0!==o&&(a=!1);break;case 1:0!==o&&(a=!1);break;case 2:1!==o&&(a=!1);break;case 3:0!==o&&(a=!1);break;case 4:0!==o&&(a=!1);break}return a},b=(e,t,n)=>{const a=e.data,d=t.data,i=t.parent.data;let o,r;switch(n){case"inner":o=d.id,r=d.children;break;case"before":case"after":o=i.id||0,r=i.children||i;break}const c={id:a.id,parent_id:o,sort_ids:r.map((e=>e.id))};(0,Z.oU)(c).then((e=>{e?(0,k.z8)({message:"操作成功!",type:"success"}):l()}))},w=(e,t)=>!e||(t.name_cn.includes(e)||t.name_en.includes(e)),g=()=>{a.value.filter(o.form.name)};return(0,s.wF)((()=>{i("menu"),l()})),{value:n,refTree:a,dictionaryMap:d,...(0,_.BK)(o),treeProps:r,getList:l,addHandle:c,deleteHandle:p,clickHandle:f,allowDragHandle:m,allowDropHandle:y,nodeDropHandle:b,filterNodeHandle:w,inputHandle:g,havePermission:M.m5}}}),D=(n(61281),n(40465));const C=(0,D.Z)(j,[["render",g],["__scopeId","data-v-3b57c81d"]]);var U=C}}]);