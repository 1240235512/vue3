"use strict";(self["webpackChunkvue3_element_plus_admin"]=self["webpackChunkvue3_element_plus_admin"]||[]).push([[7833],{97212:function(e,t,a){a.d(t,{D4:function(){return o},EZ:function(){return n},ZJ:function(){return u},aq:function(){return i}});var r=a(20077),l=a(45764);function o(e){return(0,r.Z)({url:"/backstage/file/page",method:"get",params:e})}function n(e){return(0,r.Z)({url:"/backstage/file/delete",method:"post",data:e})}function u(e){return(0,r.Z)({url:"/backstage/file/update/config",method:"post",data:e})}function i(e){let t="";const a={url:"/backstage/file/upload",method:"get",params:e};return t=`${(0,l.bR)()+a.url}${a.params?(0,l.xA)(a.params):""}`,t}},28047:function(e,t,a){a.d(t,{D4:function(){return l},EZ:function(){return i},K4:function(){return o},ou:function(){return n},wS:function(){return u}});var r=a(20077);function l(e){return(0,r.Z)({url:"/backstage/mail/template/page",method:"get",params:e})}function o(e){return(0,r.Z)({url:`/backstage/mail/template/info/${e}`,method:"get"})}function n(e){return(0,r.Z)({url:"/backstage/mail/template/create",method:"post",data:e})}function u(e){return(0,r.Z)({url:"/backstage/mail/template/update",method:"post",data:e})}function i(e){return(0,r.Z)({url:"/backstage/mail/template/delete",method:"post",data:e})}},71155:function(e,t,a){a.r(t),a.d(t,{default:function(){return Z}});var r=a(42321),l=(a(1926),a(14646)),o=(a(21123),a(13289)),n=(a(14635),a(59571)),u=(a(97085),a(94775)),i=(a(58125),a(66847)),d=(a(28630),a(440)),m=a(54592);const s={class:"dialog-footer"},c=(0,d.Uk)("取消"),f=(0,d.Uk)("确认");function p(e,t,a,p,g,b){const w=i.EZ,k=n.nH,h=u.Z,v=n.ly,Z=o.mi,_=l.d0,j=r.t,V=(0,d.Q2)("repeat");return(0,d.wg)(),(0,d.j4)(_,{width:"800px",title:e.form.id?"编辑":"新增",modelValue:e.visible,"onUpdate:modelValue":t[6]||(t[6]=t=>e.visible=t),"close-on-click-modal":!1,onClosed:e.dialogClosedHandle,"append-to-body":"",draggable:""},{footer:(0,d.w5)((()=>[(0,d._)("span",s,[(0,d.Wm)(Z,{onClick:t[4]||(t[4]=t=>e.visible=!1)},{default:(0,d.w5)((()=>[c])),_:1}),(0,d.wy)(((0,d.wg)(),(0,d.j4)(Z,{type:"primary",onClick:t[5]||(t[5]=t=>e.submit())},{default:(0,d.w5)((()=>[f])),_:1})),[[V]])])])),default:(0,d.w5)((()=>[(0,d.wy)(((0,d.wg)(),(0,d.j4)(v,{model:e.form,rules:e.rules,ref:"refForm",onKeyup:t[3]||(t[3]=(0,m.D2)((t=>e.submit()),["enter"])),"label-position":"top"},{default:(0,d.w5)((()=>[(0,d.Wm)(k,{label:"标题",prop:"subject"},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.form.subject,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.subject=t),placeholder:"标题",maxlength:"50","show-word-limit":""},null,8,["modelValue"])])),_:1}),(0,d.Wm)(k,{label:"内容",prop:"content"},{default:(0,d.w5)((()=>[(0,d.Wm)(h,{ref:"refQuill",modelValue:e.form.content,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.content=t),placeholder:"输入邮件内容..."},null,8,["modelValue"])])),_:1}),(0,d.Wm)(k,{label:"备注",prop:"remark"},{default:(0,d.w5)((()=>[(0,d.Wm)(w,{modelValue:e.form.remark,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.remark=t),placeholder:"备注",type:"textarea",maxlength:"100","show-word-limit":""},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])),[[j,e.loading]])])),_:1},8,["title","modelValue","onClosed"])}var g=a(84367),b=a(68257),w=a(28047),k=(0,d.aZ)({emits:["refresh"],components:{Quill:u.Z},setup(e,{emit:t}){const a=(0,g.iH)(),r=(0,g.iH)(),l=(0,g.qj)({visible:!1,loading:!1,form:{id:"",subject:"",content:"",remark:""}}),o=(0,g.qj)(function(){return{id:[{required:!0,message:"请输入",trigger:"blur"}],subject:[{required:!0,message:"请输入标题",trigger:"blur"}],content:[{required:!0,message:"请输入内容",trigger:"blur"}]}}()),n=async e=>{if(l.visible=!0,l.loading=!0,l.form.id=e,e){const e=await(0,w.K4)(l.form.id);e&&(l.form.id=e.data.id,l.form.subject=e.data.subject,l.form.content=e.data.content,l.form.remark=e.data.remark)}(0,d.Y3)((()=>{l.loading=!1}))},u=()=>{a.value.validate((async e=>{if(e){const e={...l.form};e.content=r.value.getEncodeHtml();const a=l.form.id?await(0,w.wS)(e):await(0,w.ou)(e);a&&(l.visible=!1,(0,b.z8)({message:"操作成功!",type:"success"}),t("refresh"))}}))},i=()=>{a.value.resetFields()};return{refForm:a,refQuill:r,...(0,g.BK)(l),rules:o,init:n,submit:u,dialogClosedHandle:i}}}),h=a(40465);const v=(0,h.Z)(k,[["render",p]]);var Z=v}}]);