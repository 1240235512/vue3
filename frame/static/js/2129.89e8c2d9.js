"use strict";(self["webpackChunkvue3_element_plus_admin"]=self["webpackChunkvue3_element_plus_admin"]||[]).push([[2129],{79155:function(e,t,n){n.d(t,{EZ:function(){return i},Iw:function(){return d},K4:function(){return a},ZF:function(){return o},ou:function(){return l},wS:function(){return u}});var r=n(20077);function o(e){return(0,r.Z)({url:`/backstage/region/list/${e}`,method:"get"})}function a(e){return(0,r.Z)({url:`/backstage/region/info/${e}`,method:"get"})}function l(e){return(0,r.Z)({url:"/backstage/region/create",method:"post",data:e})}function u(e){return(0,r.Z)({url:"/backstage/region/update",method:"post",data:e})}function i(e){return(0,r.Z)({url:"/backstage/region/delete",method:"post",data:e})}function d(e){return(0,r.Z)({url:`/backstage/region/select/list/${e}`,method:"get"})}},25430:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(440),o=n(53945);function a(e,t){const n=(0,r.FN)().proxy;return(0,r.Fl)({get(){return e[t||o.Pl]},set(e){const r=t?`update:${t}`:o.f_;n.$emit(r,e)}})}},37530:function(e,t,n){function r(e){const t=/^-?[1-9]\d*$/;return t.test(e)}function o(e){const t=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+((.[a-zA-Z0-9_-]{2,3}){1,2})$/;return t.test(e)}function a(e){const t=/^1[0-9]{10}$/;return t.test(e)}function l(e){const t=/^[a-zA-Z0-9_-]{4,16}$/;return t.test(e)}function u(e){const t=/^[a-zA-Z0-9_-]{8,16}$/;return t.test(e)}n.d(t,{Jh:function(){return o},L6:function(){return u},U:function(){return r},iH:function(){return l},tq:function(){return a}})},27337:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(42321),o=(n(1926),n(14646)),a=(n(21123),n(13289)),l=(n(14635),n(59571)),u=(n(97085),n(87476)),i=(n(58125),n(66847)),d=(n(28630),n(440)),c=n(54592);const s={class:"dialog-footer"},f=(0,d.Uk)("取消"),m=(0,d.Uk)("确认");function g(e,t,n,g,p,v){const b=i.EZ,_=l.nH,Z=u.Z,w=l.ly,h=a.mi,k=o.d0,V=r.t,y=(0,d.Q2)("repeat");return(0,d.wg)(),(0,d.j4)(k,{width:"500px",title:e.form.id?"编辑":"新增",modelValue:e.visible,"onUpdate:modelValue":t[6]||(t[6]=t=>e.visible=t),"close-on-click-modal":!1,onClosed:e.dialogClosedHandle,"append-to-body":"",draggable:""},{footer:(0,d.w5)((()=>[(0,d._)("span",s,[(0,d.Wm)(h,{onClick:t[4]||(t[4]=t=>e.visible=!1)},{default:(0,d.w5)((()=>[f])),_:1}),(0,d.wy)(((0,d.wg)(),(0,d.j4)(h,{type:"primary",onClick:t[5]||(t[5]=t=>e.submit())},{default:(0,d.w5)((()=>[m])),_:1})),[[y]])])])),default:(0,d.w5)((()=>[(0,d.wy)(((0,d.wg)(),(0,d.j4)(w,{model:e.form,rules:e.rules,ref:"refForm",onKeyup:t[3]||(t[3]=(0,c.D2)((t=>e.submit()),["enter"])),"label-position":"top"},{default:(0,d.w5)((()=>[(0,d.Wm)(_,{label:"名称",prop:"name"},{default:(0,d.w5)((()=>[(0,d.Wm)(b,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.name=t),placeholder:"名称"},null,8,["modelValue"])])),_:1}),(0,d.Wm)(_,{label:"编号",prop:"code"},{default:(0,d.w5)((()=>[(0,d.Wm)(b,{modelValue:e.form.code,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.code=t),placeholder:"编号"},null,8,["modelValue"])])),_:1}),(0,d.Wm)(_,{label:"上级",prop:"parent_id"},{default:(0,d.w5)((()=>[(0,d.Wm)(Z,{ref:"refRegion",modelValue:e.form.parent_id,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.parent_id=t)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])),[[V,e.loading]])])),_:1},8,["title","modelValue","onClosed"])}n(21703);var p=n(84367),v=n(68257),b=n(37530),_=n(79155),Z=(0,d.aZ)({emits:["refresh"],components:{Region:u.Z},setup(e,{emit:t}){const n=(0,p.iH)(),r=(0,p.iH)(),o=(0,p.qj)({visible:!1,loading:!1,form:{id:null,name:"",code:"",level:"",parent_id:""}}),a=(0,p.qj)(function(){const e=(e,t,n)=>{(0,b.U)(t)?n():n(new Error("请输入整数"))};return{name:[{required:!0,message:"请输入名称",trigger:"blur"}],code:[{required:!0,message:"请输入区域编码",trigger:"blur"},{validator:e,trigger:"blur"}],parent_id:[{required:!0,message:"请选择上级",trigger:"blur"}]}}()),l=async e=>{if(o.visible=!0,o.loading=!0,o.form.id=e,e){const e=await(0,_.K4)(o.form.id);e&&(o.form.id=e.data.id,o.form.name=e.data.name,o.form.code=e.data.code,o.form.level=e.data.level,o.form.parent_id=e.data.parent_id)}(0,d.Y3)((()=>{o.loading=!1}))},u=()=>{n.value.validate((async e=>{if(e){const e={...o.form,level:r.value.getCheckedNodes().level+1},n=o.form.id?await(0,_.wS)(e):await(0,_.ou)(e);n&&(o.visible=!1,(0,v.z8)({message:"操作成功!",type:"success"}),t("refresh"))}}))},i=()=>{n.value.resetFields()};return{refForm:n,refRegion:r,...(0,p.BK)(o),rules:a,init:l,submit:u,dialogClosedHandle:i}}}),w=n(40465);const h=(0,w.Z)(Z,[["render",g]]);var k=h},15691:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(33392),o=n(7163),a=n(85963),l=n(54421),u=o.Z?o.Z.isConcatSpreadable:void 0;function i(e){return(0,l.Z)(e)||(0,a.Z)(e)||!!(u&&e&&e[u])}var d=i;function c(e,t,n,o,a){var l=-1,u=e.length;n||(n=d),a||(a=[]);while(++l<u){var i=e[l];t>0&&n(i)?t>1?c(i,t-1,n,o,a):(0,r.Z)(a,i):o||(a[a.length]=i)}return a}var s=c,f=1/0;function m(e){var t=null==e?0:e.length;return t?s(e,f):[]}var g=m}}]);