"use strict";(self["webpackChunkvue3_element_plus_admin"]=self["webpackChunkvue3_element_plus_admin"]||[]).push([[9674,5783],{23930:function(e){
/*!
 * escape-html
 * Copyright(c) 2012-2013 TJ Holowaychuk
 * Copyright(c) 2015 Andreas Lubbe
 * Copyright(c) 2015 Tiancheng "Timothy" Gu
 * MIT Licensed
 */
var t=/["'&<>]/;function n(e){var n,a=""+e,r=t.exec(a);if(!r)return a;var l="",o=0,i=0;for(o=r.index;o<a.length;o++){switch(a.charCodeAt(o)){case 34:n="&quot;";break;case 38:n="&amp;";break;case 39:n="&#39;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}i!==o&&(l+=a.substring(i,o)),i=o+1,l+=n}return i!==o?l+a.substring(i,o):l}e.exports=n},78362:function(e,t,n){n.d(t,{D4:function(){return r},Iw:function(){return c},K4:function(){return l},Lo:function(){return w},PI:function(){return p},Sx:function(){return h},Uj:function(){return s},X$:function(){return g},b2:function(){return f},c3:function(){return m},ef:function(){return d},mg:function(){return u},ou:function(){return o},wS:function(){return i}});var a=n(20077);function r(e){return(0,a.Z)({url:"/backstage/role/page",method:"get",params:e})}function l(e){return(0,a.Z)({url:`/backstage/role/info/${e}`,method:"get"})}function o(e){return(0,a.Z)({url:"/backstage/role/create",method:"post",data:e})}function i(e){return(0,a.Z)({url:"/backstage/role/update",method:"post",data:e})}function d(e){return(0,a.Z)({url:"/backstage/role/delete",method:"post",data:e})}function u(e){return(0,a.Z)({url:"/backstage/role/show",method:"post",data:e})}function c(){return(0,a.Z)({url:"/backstage/role/select/list",method:"get"})}function s(e){return(0,a.Z)({url:"/backstage/role/global/page",method:"get",params:e})}function m(e){return(0,a.Z)({url:`/backstage/role/global/info/${e}`,method:"get"})}function f(e){return(0,a.Z)({url:"/backstage/role/global/create",method:"post",data:e})}function p(e){return(0,a.Z)({url:"/backstage/role/global/update",method:"post",data:e})}function g(e){return(0,a.Z)({url:"/backstage/role/global/delete",method:"post",data:e})}function w(e){return(0,a.Z)({url:"/backstage/role/global/show",method:"post",data:e})}function h(e){return(0,a.Z)({url:`/backstage/role/global/select/list/${e}`,method:"get"})}},25430:function(e,t,n){n.d(t,{Z:function(){return l}});var a=n(440),r=n(53945);function l(e,t){const n=(0,a.FN)().proxy;return(0,a.Fl)({get(){return e[t||r.Pl]},set(e){const a=t?`update:${t}`:r.f_;n.$emit(a,e)}})}},95006:function(e,t,n){n.d(t,{Z:function(){return r}});var a=n(84367);function r(){const e=(0,a.qj)({current:1,size:10,total:0,sizes:[10,20,30,40,50,100,200]});return{page:e}}},80134:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var a=n(42321),r=(n(1926),n(14646)),l=(n(21123),n(13289)),o=(n(14635),n(59571)),i=(n(97085),n(33612)),d=(n(82262),n(58125),n(66847)),u=(n(28630),n(440)),c=n(54592);const s={class:"dialog-footer"},m=(0,u.Uk)("取消"),f=(0,u.Uk)("确认");function p(e,t,n,p,g,w){const h=d.EZ,b=o.nH,v=i.m,k=o.ly,_=l.mi,y=r.d0,C=a.t,Z=(0,u.Q2)("repeat");return(0,u.wg)(),(0,u.j4)(y,{width:"450px",title:e.form.id?"编辑":"新增",modelValue:e.visible,"onUpdate:modelValue":t[6]||(t[6]=t=>e.visible=t),"close-on-click-modal":!1,onClosed:e.dialogClosedHandle,"append-to-body":"",draggable:""},{footer:(0,u.w5)((()=>[(0,u._)("span",s,[(0,u.Wm)(_,{onClick:t[4]||(t[4]=t=>e.visible=!1)},{default:(0,u.w5)((()=>[m])),_:1}),(0,u.wy)(((0,u.wg)(),(0,u.j4)(_,{type:"primary",onClick:t[5]||(t[5]=t=>e.submit())},{default:(0,u.w5)((()=>[f])),_:1})),[[Z]])])])),default:(0,u.w5)((()=>[(0,u.wy)(((0,u.wg)(),(0,u.j4)(k,{model:e.form,rules:e.rules,ref:"refForm",onKeyup:t[3]||(t[3]=(0,c.D2)((t=>e.submit()),["enter"])),"label-position":"top"},{default:(0,u.w5)((()=>[(0,u.Wm)(b,{label:"角色名称",prop:"name"},{default:(0,u.w5)((()=>[(0,u.Wm)(h,{modelValue:e.form.name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.form.name=t),placeholder:"角色名称",maxlength:"20","show-word-limit":""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(b,{label:"备注",prop:"remark"},{default:(0,u.w5)((()=>[(0,u.Wm)(h,{modelValue:e.form.remark,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.remark=t),type:"textarea",placeholder:"备注",maxlength:"100","show-word-limit":""},null,8,["modelValue"])])),_:1}),(0,u.Wm)(b,{label:"权限",prop:"enterprise_menu_ids"},{default:(0,u.w5)((()=>[(0,u.Wm)(v,{class:"width-full",ref:"refCascader",modelValue:e.form.enterprise_menu_ids,"onUpdate:modelValue":t[2]||(t[2]=t=>e.form.enterprise_menu_ids=t),options:e.menus,props:e.cascaderProps,"show-all-levels":!1,"collapse-tags":"","collapse-tags-tooltip":"",clearable:""},null,8,["modelValue","options","props"])])),_:1})])),_:1},8,["model","rules"])),[[C,e.loading]])])),_:1},8,["title","modelValue","onClosed"])}var g=n(84367),w=n(68257),h=n(58712),b=n(78362),v=(0,u.aZ)({emits:["refresh"],setup(e,{emit:t}){const n=(0,g.iH)(),a=(0,g.iH)(),r=(0,g.qj)({loading:!1,visible:!1,form:{id:null,name:"",remark:"",enterprise_menu_ids:[],enterprise_id:""},menus:[]}),l=(0,g.qj)(function(){return{name:[{required:!0,message:"请输入角色名称",trigger:"blur"}],enterprise_menu_ids:[{type:"array",required:!0,message:"请选择权限",trigger:"blur"}]}}()),o=(0,u.Fl)((()=>{const e={multiple:!0,emitPath:!1,checkStrictly:!1,value:"id",label:"name_cn",children:"children"};return e})),i=async()=>{const e=await(0,h.Sx)(r.form.enterprise_id);if(e){const t=[{id:0,name_cn:"一级菜单",name_en:"First level menu",parent_id:0,children:e.data}];r.menus=t}},d=async(e,t)=>{if(r.visible=!0,r.loading=!0,r.form.enterprise_id=e,r.form.id=t,await i(),t){const e=await(0,b.c3)(t);e&&(r.form.name=e.data.name,r.form.remark=e.data.remark,r.form.enterprise_menu_ids=e.data.enterprise_menu_ids)}(0,u.Y3)((()=>{r.loading=!1}))},c=()=>{n.value.validate((async e=>{if(e){const e=a.value.getCheckedNodes(!0),n=[];e.forEach((e=>{n.push.apply(n,e.pathValues)})),r.form.enterprise_menu_ids=Array.from(new Set(n)).filter((e=>0!==e));const l=r.form.id?await(0,b.PI)(r.form):await(0,b.b2)(r.form);l&&(r.visible=!1,(0,w.z8)({message:"操作成功!",type:"success"}),t("refresh"))}}))},s=()=>{n.value.resetFields()};return{refForm:n,refCascader:a,...(0,g.BK)(r),rules:l,cascaderProps:o,init:d,submit:c,dialogClosedHandle:s}}}),k=n(40465);const _=(0,k.Z)(v,[["render",p]]);var y=_},87713:function(e,t,n){n.r(t),n.d(t,{default:function(){return E}});var a=n(42321),r=(n(1926),n(13070)),l=n(86690),o=n(15227),i=(n(83049),n(65298)),d=(n(39504),n(79062),n(59571)),u=(n(97085),n(13289)),c=(n(14635),n(58125),n(66847)),s=(n(28630),n(99887)),m=n(440),f=n(54592);const p=(0,m.Uk)("搜索"),g=(0,m.Uk)("重置"),w=(0,m.Uk)("新增"),h=(0,m.Uk)("批量删除"),b=(0,m.Uk)("编辑"),v=(0,m.Uk)("删除");function k(e,t,n,k,_,y){const C=s.Z,Z=c.EZ,x=d.nH,H=u.mi,W=d.ly,V=o.$Y,U=i.OX,F=o.eI,E=(0,m.up)("AddEdit"),j=l["default"],N=r.Z,S=(0,m.Q2)("repeat"),A=(0,m.Q2)("permission"),D=a.t;return(0,m.wg)(),(0,m.j4)(N,{ref:"refContainerSidebar",scroll:!1},{sidebar:(0,m.w5)((()=>[(0,m.Wm)(C,{modelValue:e.active,"onUpdate:modelValue":t[0]||(t[0]=t=>e.active=t),onChange:e.changeHandle},null,8,["modelValue","onChange"])])),header:(0,m.w5)((()=>[(0,m.Wm)(W,{ref:"refForm",inline:!0,onKeyup:t[6]||(t[6]=(0,f.D2)((t=>e.reacquireHandle()),["enter"]))},{default:(0,m.w5)((()=>[(0,m.Wm)(x,null,{default:(0,m.w5)((()=>[(0,m.Wm)(Z,{modelValue:e.form.name,"onUpdate:modelValue":t[1]||(t[1]=t=>e.form.name=t),placeholder:"名称",clearable:""},null,8,["modelValue"])])),_:1}),(0,m.Wm)(x,null,{default:(0,m.w5)((()=>[(0,m.wy)(((0,m.wg)(),(0,m.j4)(H,{onClick:t[2]||(t[2]=t=>e.reacquireHandle()),disabled:!e.active},{default:(0,m.w5)((()=>[p])),_:1},8,["disabled"])),[[S]]),(0,m.wy)(((0,m.wg)(),(0,m.j4)(H,{onClick:t[3]||(t[3]=t=>(e.clearJson(e.form),e.reacquireHandle())),disabled:!e.active},{default:(0,m.w5)((()=>[g])),_:1},8,["disabled"])),[[S]]),(0,m.wy)(((0,m.wg)(),(0,m.j4)(H,{type:"primary",onClick:t[4]||(t[4]=t=>e.addEditHandle()),disabled:!e.active},{default:(0,m.w5)((()=>[w])),_:1},8,["disabled"])),[[A,"global:role:create"]]),(0,m.wy)(((0,m.wg)(),(0,m.j4)(H,{type:"danger",disabled:e.selection.length<=0||!e.active,onClick:t[5]||(t[5]=t=>e.deleteHandle())},{default:(0,m.w5)((()=>[h])),_:1},8,["disabled"])),[[A,"global:role:delete"]])])),_:1})])),_:1},512)])),default:(0,m.w5)((()=>[(0,m.wy)(((0,m.wg)(),(0,m.j4)(F,{ref:"refTable",data:e.list,onSelectionChange:e.selectionHandle,border:""},{default:(0,m.w5)((()=>[(0,m.Wm)(V,{align:"center",type:"selection",width:"50"}),(0,m.Wm)(V,{align:"center",label:"ID",prop:"id",width:"80"}),(0,m.Wm)(V,{align:"center",label:"角色名称",prop:"name"}),(0,m.Wm)(V,{align:"center",label:"备注",prop:"remark"}),(0,m.Wm)(V,{align:"center",label:"是否显示",prop:"show",width:"160"},{default:(0,m.w5)((({row:t})=>[(0,m.wy)((0,m.Wm)(U,{onChange:n=>e.showHandle(t),modelValue:t.show,"onUpdate:modelValue":e=>t.show=e,"active-value":1,"inactive-value":0},null,8,["onChange","modelValue","onUpdate:modelValue"]),[[A,"global:role:show"]])])),_:1}),(0,m.Wm)(V,{align:"center",label:"创建时间",prop:"created_at",width:"160"}),(0,m.Wm)(V,{align:"center",label:"更新时间",prop:"updated_at",width:"160"}),(0,m.Wm)(V,{align:"center",label:"操作",width:"110",fixed:"right"},{default:(0,m.w5)((({row:t})=>[(0,m.wy)(((0,m.wg)(),(0,m.j4)(H,{type:"primary",link:"",onClick:n=>e.addEditHandle(t.id)},{default:(0,m.w5)((()=>[b])),_:2},1032,["onClick"])),[[A,"global:role:update"]]),(0,m.wy)(((0,m.wg)(),(0,m.j4)(H,{type:"danger",link:"",onClick:n=>e.deleteHandle(t.id)},{default:(0,m.w5)((()=>[v])),_:2},1032,["onClick"])),[[A,"global:role:delete"]])])),_:1})])),_:1},8,["data","onSelectionChange"])),[[D,e.loading]]),e.visible?((0,m.wg)(),(0,m.j4)(E,{key:0,ref:"refAddEdit",onRefresh:e.getList},null,8,["onRefresh"])):(0,m.kq)("",!0)])),footer:(0,m.w5)((()=>[(0,m.Wm)(j,{page:e.page,onChange:e.pageChangeHandle},null,8,["page","onChange"])])),_:1},512)}var _=n(84367),y=n(81651),C=n(68257),Z=n(80134),x=n(95006),H=n(45764),W=n(78362),V=(0,m.aZ)({components:{ContainerSidebar:r.Z,EnterpriseSidebar:s.Z,AddEdit:Z["default"]},setup(){const e=(0,_.iH)(),t=(0,_.iH)(),n=(0,_.iH)(),a=(0,_.iH)(),{page:r}=(0,x.Z)(),l=(0,_.qj)({active:"",loading:!1,visible:!1,form:{name:""},list:[],selection:[]}),o=()=>{if(l.active){const e={id:l.active,...l.form,current:r.current,size:r.size};l.loading=!0,(0,W.Uj)(e).then((e=>{e&&(l.list=e.data.list,r.total=e.data.total),(0,m.Y3)((()=>{l.loading=!1}))}))}},i=()=>{r.current=1,o()},d=e=>{l.visible=!0,(0,m.Y3)((()=>{a.value.init(l.active,e)}))},u=e=>{const t=e?[e]:l.selection.map((e=>e.id));y.T.confirm(`确定对[id=${t.join(",")}]进行[${e?"删除":"批量删除"}]操作?`,"提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{(0,W.X$)({keys:t}).then((e=>{e&&((0,C.z8)({message:"操作成功!",type:"success"}),o())}))})).catch((()=>{}))},c=e=>{const t={key:e.id,value:e.show};(0,W.Lo)(t).then((t=>{t?(0,C.z8)({message:"操作成功!",type:"success"}):e.show=1===e.show?0:1}))},s=e=>{l.selection=e},f=e=>{r.current=e.current,r.size=e.size,o()},p=t=>{e.value.setScrollTop(),i()};return{refContainerSidebar:e,refForm:t,refTable:n,refAddEdit:a,page:r,...(0,_.BK)(l),getList:o,reacquireHandle:i,addEditHandle:d,deleteHandle:u,showHandle:c,selectionHandle:s,pageChangeHandle:f,changeHandle:p,clearJson:H.vL}}}),U=n(40465);const F=(0,U.Z)(V,[["render",k]]);var E=F},15691:function(e,t,n){n.d(t,{Z:function(){return p}});var a=n(33392),r=n(7163),l=n(85963),o=n(54421),i=r.Z?r.Z.isConcatSpreadable:void 0;function d(e){return(0,o.Z)(e)||(0,l.Z)(e)||!!(i&&e&&e[i])}var u=d;function c(e,t,n,r,l){var o=-1,i=e.length;n||(n=u),l||(l=[]);while(++o<i){var d=e[o];t>0&&n(d)?t>1?c(d,t-1,n,r,l):(0,a.Z)(l,d):r||(l[l.length]=d)}return l}var s=c,m=1/0;function f(e){var t=null==e?0:e.length;return t?s(e,m):[]}var p=f},26529:function(e,t,n){n.d(t,{Z:function(){return j}});var a,r,l,o,i,d,u,c,s,m,f,p,g,w,h,b=!1;function v(){if(!b){b=!0;var e=navigator.userAgent,t=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),n=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(p=/\b(iPhone|iP[ao]d)/.exec(e),g=/\b(iP[ao]d)/.exec(e),m=/Android/i.exec(e),w=/FBAN\/\w+;/i.exec(e),h=/Mobile/i.exec(e),f=!!/Win64/.exec(e),t){a=t[1]?parseFloat(t[1]):t[5]?parseFloat(t[5]):NaN,a&&document&&document.documentMode&&(a=document.documentMode);var v=/(?:Trident\/(\d+.\d+))/.exec(e);d=v?parseFloat(v[1])+4:a,r=t[2]?parseFloat(t[2]):NaN,l=t[3]?parseFloat(t[3]):NaN,o=t[4]?parseFloat(t[4]):NaN,o?(t=/(?:Chrome\/(\d+\.\d+))/.exec(e),i=t&&t[1]?parseFloat(t[1]):NaN):i=NaN}else a=r=l=i=o=NaN;if(n){if(n[1]){var k=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);u=!k||parseFloat(k[1].replace("_","."))}else u=!1;c=!!n[2],s=!!n[3]}else u=c=s=!1}}var k,_={ie:function(){return v()||a},ieCompatibilityMode:function(){return v()||d>a},ie64:function(){return _.ie()&&f},firefox:function(){return v()||r},opera:function(){return v()||l},webkit:function(){return v()||o},safari:function(){return _.webkit()},chrome:function(){return v()||i},windows:function(){return v()||c},osx:function(){return v()||u},linux:function(){return v()||s},iphone:function(){return v()||p},mobile:function(){return v()||p||g||m||h},nativeApp:function(){return v()||w},android:function(){return v()||m},ipad:function(){return v()||g}},y=_,C=!!(typeof window<"u"&&window.document&&window.document.createElement),Z={canUseDOM:C,canUseWorkers:typeof Worker<"u",canUseEventListeners:C&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:C&&!!window.screen,isInWorker:!C},x=Z;function H(e,t){if(!x.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,a=n in document;if(!a){var r=document.createElement("div");r.setAttribute(n,"return;"),a="function"==typeof r[n]}return!a&&k&&"wheel"===e&&(a=document.implementation.hasFeature("Events.wheel","3.0")),a}x.canUseDOM&&(k=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var W=H,V=10,U=40,F=800;function E(e){var t=0,n=0,a=0,r=0;return"detail"in e&&(n=e.detail),"wheelDelta"in e&&(n=-e.wheelDelta/120),"wheelDeltaY"in e&&(n=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=n,n=0),a=t*V,r=n*V,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(a=e.deltaX),(a||r)&&e.deltaMode&&(1==e.deltaMode?(a*=U,r*=U):(a*=F,r*=F)),a&&!t&&(t=a<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:t,spinY:n,pixelX:a,pixelY:r}}E.getEventType=function(){return y.firefox()?"DOMMouseScroll":W("wheel")?"wheel":"mousewheel"};var j=E;
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */}}]);